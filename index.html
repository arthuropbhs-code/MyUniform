<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MyUniform | Pompano Beach Complete</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Public+Sans:wght@300;400;700;900&display=swap');
        
        :root {
            --primary: #6366f1;
            --army-gold: #c5a059;
            --military-slate: #1a1f2e;
        }

        body { 
            font-family: 'Public Sans', sans-serif; 
            background-color: #f1f5f9; 
            overflow-x: hidden; 
            scroll-behavior: smooth;
            margin: 0;
            padding: 0;
        }

        .military-bg {
            background: radial-gradient(circle at 50% 50%, #1e293b 0%, #0f172a 100%);
            position: fixed;
            inset: 0;
            z-index: 50;
        }

        .military-bg::after {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
        }

        .mannequin-container { 
            position: relative; 
            width: 480px; 
            height: 620px; 
            display: flex; 
            justify-content: center; 
        }

        .mannequin-img {
            height: 100%;
            width: auto;
            object-fit: contain;
            z-index: 10;
            filter: drop-shadow(0 20px 50px rgba(0,0,0,0.5));
        }

        .ribbon-rack-container { 
            position: absolute; 
            top: 29.5%; 
            left: 69.5%;  
            transform: translateX(-50%);
            display: flex; 
            flex-direction: column-reverse; /* Build from bottom up */
            gap: 1.5px; 
            align-items: center; 
            z-index: 20;
        }

        .medals-container {
            position: absolute;
            top: 36.5%;
            left: 69.5%;
            transform: translateX(-50%);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            width: 140px;
            gap: 4px;
            z-index: 20;
        }

        .arcs-container {
            position: absolute;
            top: 36.5%;
            left: 30.5%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            gap: 2px;
            align-items: center;
            z-index: 20;
        }

        .ribbon-mini {
            width: 32px; height: 9px;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            border: 0.4px solid rgba(0,0,0,0.8);
            position: relative;
            box-shadow: 0 0.5px 1px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .placeholder-ribbon {
            background: repeating-linear-gradient(
                45deg,
                var(--ribbon-color, #475569),
                var(--ribbon-color, #475569) 2px,
                rgba(0,0,0,0.1) 2px,
                rgba(0,0,0,0.1) 4px
            );
        }

        .mini-star {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 6px; color: #ffd700;
            text-shadow: 0.5px 0.5px 1px black;
            width: 100%; text-align: center;
            letter-spacing: -1px;
            z-index: 5;
        }

        .fade-in-up {
            animation: fadeInUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-tap:active { transform: scale(0.97); }
        
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
    </style>
</head>
<body class="antialiased">

    <!-- LANDING PAGE -->
    <div id="landing-page" class="military-bg flex flex-col items-center justify-between p-6 text-white transition-all duration-700">
        <nav class="w-full max-w-5xl flex items-center justify-between py-4 fade-in-up">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-indigo-500 rounded flex items-center justify-center font-black text-xs">M</div>
                <span class="font-black tracking-tight text-sm">MyUniform</span>
            </div>
            <p class="text-[10px] font-bold uppercase tracking-widest text-white/40 text-right leading-tight">Broward County<br>JROTC</p>
        </nav>

        <div class="flex flex-col items-center text-center max-w-xl">
            <div class="fade-in-up">
                <h1 class="text-6xl font-black tracking-tighter mb-4">
                    Broward <span class="text-indigo-400">JROTC</span>
                </h1>
                <p class="text-indigo-200/50 uppercase tracking-[0.4em] font-bold text-[10px] mb-12">Complete Ribbon & Award Manager</p>
            </div>
            
            <button onclick="enterApp()" class="btn-tap group relative p-6 bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 hover:border-indigo-500/50 hover:bg-white/20 transition-all w-full max-w-xs text-center shadow-2xl">
                <h3 class="font-bold text-lg">Pompano Beach</h3>
                <p class="text-indigo-400 text-[10px] font-black uppercase tracking-widest mt-1">Enter Tornado Battalion</p>
            </button>
        </div>

        <footer class="w-full max-w-3xl text-center pb-8 opacity-40">
            <div class="h-px bg-white/20 w-16 mx-auto mb-6"></div>
            <p class="text-[10px] uppercase tracking-widest font-bold">© 2024 MyUniform Pro</p>
        </footer>
    </div>

    <!-- MAIN APP CONTENT -->
    <div id="builder-content" class="hidden min-h-screen pb-12 bg-slate-50">
        <header class="p-4 px-6 flex items-center justify-between sticky top-0 bg-white/80 backdrop-blur-xl z-40 border-b border-slate-200">
            <button onclick="exitApp()" class="btn-tap bg-slate-100 px-4 py-2 rounded-xl font-bold text-[11px] uppercase">Exit</button>
            <div class="text-center">
                <h2 class="text-sm font-black">Pompano Beach HS</h2>
                <p class="text-indigo-600 font-black text-[9px] uppercase tracking-widest">Tornado Battalion</p>
            </div>
            <button onclick="resetAll()" class="btn-tap text-red-500 font-bold text-[11px] uppercase">Reset</button>
        </header>

        <div class="max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
            <!-- VISUALIZER -->
            <div class="flex flex-col items-center lg:sticky lg:top-24">
                <div class="bg-slate-900 w-full rounded-[3rem] p-6 shadow-2xl flex items-center justify-center overflow-hidden border-[6px] border-slate-800 relative">
                    <div class="mannequin-container" id="mannequin">
                        <img src="https://placehold.co/480x620/0f172a/6366f1?text=Uniform+Front" class="mannequin-img" alt="Uniform">
                        <div id="u-ribbons" class="ribbon-rack-container"></div>
                        <div id="u-medals" class="medals-container"></div>
                        <div id="u-arcs" class="arcs-container"></div>
                    </div>
                </div>
                <p class="mt-4 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Live Uniform Preview</p>
            </div>

            <!-- CONTROLS -->
            <div class="bg-white rounded-[2.5rem] p-6 shadow-xl border border-slate-100 h-[800px] flex flex-col">
                <div class="flex p-1.5 bg-slate-100 rounded-2xl mb-6 shrink-0">
                    <button id="btn-ribbons" onclick="setTab('ribbons')" class="flex-1 py-2.5 rounded-xl font-bold text-xs bg-white text-indigo-600 shadow-sm transition-all">Ribbons</button>
                    <button id="btn-medals" onclick="setTab('medals')" class="flex-1 py-2.5 rounded-xl font-bold text-xs text-slate-400 transition-all">Medals</button>
                    <button id="btn-arcs" onclick="setTab('arcs')" class="flex-1 py-2.5 rounded-xl font-bold text-xs text-slate-400 transition-all">Arcs</button>
                </div>
                
                <div id="selection-list" class="space-y-2 overflow-y-auto pr-2 flex-1 custom-scroll scroll-smooth"></div>
            </div>
        </div>
    </div>

    <script>
        const OFFICIAL_RIBBONS = [
            // ACADEMIC & MERIT (N-1)
            { id: 'hero', name: 'Medal for Heroism', precedence: 1, color: '#991b1b' },
            { id: 'sup-c', name: 'Superior Cadet Award', precedence: 2, color: '#1e40af' },
            { id: 'n11', name: 'Distinguished Cadet N-1-1', precedence: 3, color: '#854d0e' },
            { id: 'n12', name: 'Academic Excellence N-1-2', precedence: 4, color: '#ca8a04' },
            { id: 'n13', name: 'Academic Achievement N-1-3', precedence: 5, color: '#166534' },
            { id: 'n14', name: 'Perfect Attendance N-1-4', precedence: 6, color: '#0369a1' },
            { id: 'n15', name: 'Student Gov N-1-5', precedence: 7, color: '#4338ca' },
            { id: 'n16', name: 'Leadership Ed N-1-6', precedence: 8, color: '#6d28d9' },
            
            // LEADERSHIP & TRAINING (N-2)
            { id: 'n21', name: 'Varsity Athletics N-2-1', precedence: 9, color: '#be123c' },
            { id: 'n22', name: 'Physical Fitness N-2-2', precedence: 10, color: '#0f172a' },
            { id: 'n23', name: 'JROTC Athlete N-2-3', precedence: 11, color: '#334155' },
            { id: 'n24', name: 'Summer Camp N-2-4', precedence: 12, color: '#15803d' },
            { id: 'n25', name: 'Leadership Camp N-2-5', precedence: 13, color: '#7c2d12' },
            
            // MISC EXCELLENCE (N-3)
            { id: 'n31', name: 'Drill Team N-3-1', precedence: 14, color: '#1e3a8a' },
            { id: 'n32', name: 'Color Guard N-3-2', precedence: 15, color: '#1e40af' },
            { id: 'n33', name: 'Marksmanship N-3-3', precedence: 16, color: '#450a0a' },
            { id: 'n34', name: 'Orienteering N-3-4', precedence: 17, color: '#3f6212' },
            { id: 'n35', name: 'Adventure Training N-3-5', precedence: 18, color: '#14532d' },
            { id: 'n36', name: 'Commendation N-3-6', precedence: 19, color: '#064e3b' },
            { id: 'n37', name: 'Good Conduct N-3-7', precedence: 20, color: '#7c2d12' },
            { id: 'n38', name: 'JCLC N-3-8', precedence: 21, color: '#1e293b' },
            { id: 'n39', name: 'Recruiting N-3-9', precedence: 22, color: '#312e81' },
            { id: 'n310', name: 'Service Learning N-3-10', precedence: 23, color: '#4c1d95' },

            // OTHER (N-4)
            { id: 'n41', name: 'Parade Ribbon N-4-1', precedence: 24, color: '#5b21b6' },
            { id: 'n42', name: 'Recruiting Ribbon N-4-2', precedence: 25, color: '#065f46' },
            { id: 'n43', name: 'Music Ribbon N-4-3', precedence: 26, color: '#1e40af' },
            { id: 'n44', name: 'Special Ribbon N-4-4', precedence: 27, color: '#831843' },
            { id: 'n45', name: 'Special Ribbon N-4-5', precedence: 28, color: '#451a03' },
            { id: 'n46', name: 'Service Learning N-4-6', precedence: 29, color: '#0f172a' },
            { id: 'n47', name: 'Excellent Staff N-4-7', precedence: 30, color: '#4d7c0f' }
        ];

        const POMPANO_RIBBONS = [
            { id: 'p-ccq', name: 'Co. Commander of Quarter', precedence: 300, color: '#166534' },
            { id: 'p-cxoq', name: 'Co. XO of Quarter', precedence: 301, color: '#1e40af' },
            { id: 'p-c1sq', name: 'Co. 1SG of Quarter', precedence: 302, color: '#991b1b' },
            { id: 'p-plq', name: 'Platoon Leader of Quarter', precedence: 303, color: '#1e3a8a' },
            { id: 'p-psq', name: 'Platoon Sergeant of Quarter', precedence: 304, color: '#1e293b' },
            { id: 'p-slq', name: 'Squad Leader of Quarter', precedence: 305, color: '#3f6212' },
            { id: 'p-smq', name: 'Squad Member of Quarter', precedence: 306, color: '#0f172a' },
            { id: 'p-ma', name: 'Military Appreciation', precedence: 311, color: '#854d0e' },
            { id: 'p-echc', name: 'Exp. Camp Honor Cadet', precedence: 312, color: '#b45309' },
            { id: 'p-echo', name: 'Exp. Camp Honor Company', precedence: 313, color: '#c2410c' },
            { id: 'p-ecc', name: 'Exp. Camp Cadet Cadre', precedence: 314, color: '#be123c' },
            { id: 'p-eca', name: 'Exp. Camp Attendance', precedence: 315, color: '#0d9488' },
            { id: 'p-jpa', name: 'JPA Ribbon', precedence: 316, color: '#334155' },
            { id: 'p-dai', name: 'DAI Award Ribbon', precedence: 317, color: '#4d7c0f' },
            { id: 'p-hc', name: 'Honor Company', precedence: 322, color: '#ca8a04' },
            { id: 'p-fun', name: 'Funeral Ribbon', precedence: 327, color: '#020617' },
            { id: 'p-100f', name: '100 Flags Ribbon', precedence: 328, color: '#991b1b' },
            { id: 'p-haf', name: 'Highest Amount of Flags', precedence: 329, color: '#854d0e' }
        ];

        const MEDALS = [
            { id: 'm1', name: 'Medal for Heroism', color: '#8b0000' },
            { id: 'm2', name: 'Superior Cadet Medal', color: '#1e3a8a' },
            { id: 'm3', name: 'Distinguished Cadet Medal', color: '#ca8a04' },
            { id: 'm4', name: 'Academic Excellence Medal', color: '#166534' },
            { id: 'm5', name: 'Legion of Valor', color: '#4c1d95' }
        ];

        const ARCS = [
            { id: 'a1', name: 'Drill Team' },
            { id: 'a2', name: 'Color Guard' },
            { id: 'a3', name: 'Raider Team' },
            { id: 'a4', name: 'Marksmanship' },
            { id: 'a5', name: 'Academic Team' },
            { id: 'a6', name: 'Orienteering' },
            { id: 'a7', name: 'JLAB' },
            { id: 'a8', name: 'Honor Guard' },
            { id: 'a9', name: 'Leadership' }
        ];

        let state = { ribbons: new Map(), medals: new Set(), arcs: new Set(), tab: 'ribbons' };

        function enterApp() {
            document.getElementById('landing-page').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('landing-page').classList.add('hidden');
                document.getElementById('builder-content').classList.remove('hidden');
                renderSelections();
                updatePreview();
            }, 500);
        }

        function exitApp() { location.reload(); }

        function setTab(tab) {
            state.tab = tab;
            ['ribbons', 'medals', 'arcs'].forEach(t => {
                const btn = document.getElementById(`btn-${t}`);
                btn.className = (t === tab) ? "flex-1 py-2.5 rounded-xl font-bold text-xs bg-white text-indigo-600 shadow-sm" : "flex-1 py-2.5 rounded-xl font-bold text-xs text-slate-400";
            });
            renderSelections();
        }

        function updateRibbon(id, d) {
            let count = (state.ribbons.get(id) || 0) + d;
            if (count <= 0) state.ribbons.delete(id); else state.ribbons.set(id, Math.min(count, 5));
            updatePreview(); renderSelections();
        }

        function toggleItem(type, id) {
            state[type].has(id) ? state[type].delete(id) : state[type].add(id);
            updatePreview(); renderSelections();
        }

        function renderSelections() {
            const list = document.getElementById('selection-list');
            list.innerHTML = '';
            
            if (state.tab === 'ribbons') {
                const groups = [
                    {label: "Pompano Beach Specific", data: POMPANO_RIBBONS},
                    {label: "Army JROTC Official (N-1 to N-4)", data: OFFICIAL_RIBBONS}
                ];
                groups.forEach(group => {
                    const h = document.createElement('div');
                    h.className = "text-[9px] font-black uppercase tracking-widest text-slate-400 mb-2 mt-4 px-2 flex items-center gap-2";
                    h.innerHTML = `<span class="h-px bg-slate-200 flex-1"></span>${group.label}<span class="h-px bg-slate-200 flex-1"></span>`;
                    list.appendChild(h);

                    group.data.forEach(r => {
                        const count = state.ribbons.get(r.id) || 0;
                        const div = document.createElement('div');
                        div.className = `flex items-center justify-between p-3 rounded-2xl border transition-all ${count > 0 ? 'border-indigo-500 bg-indigo-50 shadow-sm' : 'bg-white border-slate-100 hover:border-slate-200'}`;
                        div.innerHTML = `
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-3 border border-slate-300 bg-white overflow-hidden shadow-inner">
                                    <div class="w-full h-full placeholder-ribbon" style="--ribbon-color:${r.color}"></div>
                                </div>
                                <span class="text-[10px] font-bold text-slate-700 leading-tight">${r.name}</span>
                            </div>
                            <div class="flex items-center bg-white rounded-xl border border-slate-200 p-0.5 shrink-0">
                                <button onclick="updateRibbon('${r.id}', -1)" class="w-7 h-7 flex items-center justify-center text-xs font-bold text-slate-400 hover:text-red-500">-</button>
                                <span class="w-5 text-center text-[10px] font-black text-indigo-600">${count}</span>
                                <button onclick="updateRibbon('${r.id}', 1)" class="w-7 h-7 flex items-center justify-center text-xs text-indigo-600 font-bold hover:bg-indigo-50 rounded-lg">+</button>
                            </div>`;
                        list.appendChild(div);
                    });
                });
            } else {
                const items = state.tab === 'medals' ? MEDALS : ARCS;
                items.forEach(item => {
                    const active = state[state.tab].has(item.id);
                    const div = document.createElement('div');
                    div.className = `flex items-center justify-between p-4 rounded-2xl border cursor-pointer transition-all ${active ? 'border-indigo-500 bg-indigo-50 shadow-sm' : 'bg-white border-slate-100 hover:border-slate-200'}`;
                    div.onclick = () => toggleItem(state.tab, item.id);
                    div.innerHTML = `
                        <div class="flex items-center gap-3">
                            ${state.tab === 'medals' ? `<div class="w-3 h-5" style="background:${item.color}; border-radius:1px;"></div>` : ''}
                            <span class="text-[10px] font-bold uppercase tracking-wide">${item.name}</span>
                        </div>
                        <div class="w-6 h-6 rounded-full flex items-center justify-center ${active ? 'bg-indigo-500 text-white' : 'bg-slate-100 text-slate-400'}">
                            <span class="text-[10px] font-black">${active ? '✓' : '+'}</span>
                        </div>`;
                    list.appendChild(div);
                });
            }
        }

        function updatePreview() {
            const rContainer = document.getElementById('u-ribbons');
            rContainer.innerHTML = '';
            const all = [...OFFICIAL_RIBBONS, ...POMPANO_RIBBONS];
            const active = all.filter(r => state.ribbons.has(r.id)).sort((a,b) => b.precedence - a.precedence); // Higher precedence (smaller number) at top

            // Group into rows of 3
            for(let i=0; i < active.length; i += 3) {
                const row = document.createElement('div');
                row.className = "flex gap-[1.5px]";
                active.slice(i, i+3).forEach(r => {
                    const d = document.createElement('div');
                    d.className = 'ribbon-mini placeholder-ribbon';
                    d.style.setProperty('--ribbon-color', r.color);
                    const count = state.ribbons.get(r.id);
                    if(count > 1) {
                        const s = document.createElement('div');
                        s.className = 'mini-star';
                        s.innerText = '★'.repeat(count-1);
                        d.appendChild(s);
                    }
                    row.appendChild(d);
                });
                rContainer.appendChild(row);
            }

            const mContainer = document.getElementById('u-medals');
            mContainer.innerHTML = '';
            MEDALS.filter(m => state.medals.has(m.id)).forEach(m => {
                const d = document.createElement('div');
                d.innerHTML = `
                    <div style="width:20px; display:flex; flex-direction:column; align-items:center;">
                        <div style="width:16px; height:18px; background:${m.color}; border:0.2px solid black;"></div>
                        <div style="width:14px; height:14px; background:linear-gradient(135deg, gold, #c5a059); border-radius:50%; margin-top:-4px; border:0.5px solid #854d0e;"></div>
                    </div>`;
                mContainer.appendChild(d);
            });

            const aContainer = document.getElementById('u-arcs');
            aContainer.innerHTML = '';
            ARCS.filter(a => state.arcs.has(a.id)).forEach(a => {
                const d = document.createElement('div');
                d.style = "padding:1px 5px; font-size:4.5px; background:#1e293b; color:#ffd700; border:0.5px solid #ffd700; border-radius:1px; margin-bottom:1.5px; text-transform:uppercase; font-weight:900; letter-spacing:0.2px; text-align:center; min-width:35px;";
                d.innerText = a.name;
                aContainer.appendChild(d);
            });
        }

        function resetAll() {
            state.ribbons.clear(); 
            state.medals.clear(); 
            state.arcs.clear();
            updatePreview(); 
            renderSelections();
        }
    </script>
</body>
</html>
