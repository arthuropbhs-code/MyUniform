<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MyUniform | Pompano Beach</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Public+Sans:wght@300;400;700;900&display=swap');
        
        :root {
            --primary: #6366f1;
            --army-gold: #c5a059;
            --military-slate: #1a1f2e;
        }

        body { 
            font-family: 'Public Sans', sans-serif; 
            background-color: #f1f5f9; 
            overflow-x: hidden; 
            scroll-behavior: smooth;
            -webkit-tap-highlight-color: transparent;
        }

        /* TACTICAL GRADIENT BACKGROUND */
        .military-bg {
            background: radial-gradient(circle at 50% 50%, #1e293b 0%, #0f172a 100%);
            position: relative;
        }

        .military-bg::after {
            content: "";
            position: absolute;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        /* NAVBAR STYLING */
        .nav-link {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: rgba(255,255,255,0.6);
            transition: all 0.2s;
            padding: 8px 16px;
            border-radius: 8px;
        }
        .nav-link:hover {
            color: #fff;
            background: rgba(255,255,255,0.05);
        }

        /* MANNEQUIN BASE SETUP */
        .mannequin-container { 
            position: relative; 
            width: 480px; 
            height: 620px; 
            display: flex; 
            justify-content: center; 
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .mannequin-img {
            height: 100%;
            width: auto;
            object-fit: contain;
            z-index: 10;
            filter: drop-shadow(0 20px 50px rgba(0,0,0,0.5));
        }

        /* POSITION ENGINES */
        .ribbon-rack-container { 
            position: absolute; 
            top: 30.5%; 
            left: 69.5%;  
            transform: translateX(-50%);
            display: flex; 
            flex-direction: column;
            gap: 1.5px; 
            align-items: center; 
            z-index: 20;
            pointer-events: none;
        }

        .medals-container {
            position: absolute;
            top: 35.5%;
            left: 69.5%;
            transform: translateX(-50%);
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            width: 120px;
            gap: 2px;
            z-index: 20;
        }

        .arcs-container {
            position: absolute;
            top: 35.5%;
            left: 30.5%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            gap: 3px;
            align-items: center;
            z-index: 20;
        }

        /* RIBBON GRAPHICS */
        .ribbon-mini {
            width: 35px; height: 10px;
            background-size: 100% 100%;
            background-repeat: no-repeat;
            border: 0.4px solid rgba(0,0,0,0.9);
            position: relative;
            box-shadow: 0 0.5px 1px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .placeholder-ribbon {
            background: repeating-linear-gradient(
                45deg,
                var(--ribbon-color, #475569),
                var(--ribbon-color, #475569) 2px,
                rgba(0,0,0,0.2) 2px,
                rgba(0,0,0,0.2) 4px
            );
        }

        .mini-star {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-size: 7px; color: #ffd700;
            text-shadow: 0.5px 0.5px 1px black;
            width: 100%; text-align: center;
            letter-spacing: -1px;
            z-index: 5;
        }

        .fade-in-up {
            animation: fadeInUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .btn-tap:active { transform: scale(0.97); }

        /* SCROLLBAR */
        #selection-list::-webkit-scrollbar { width: 4px; }
        #selection-list::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="antialiased">

    <!-- LANDING PAGE -->
    <div id="landing-page" class="military-bg fixed inset-0 z-50 flex flex-col items-center justify-between p-6 text-white transition-all duration-700">
        
        <!-- NAV BAR -->
        <nav class="w-full max-w-5xl flex items-center justify-between py-4 fade-in-up">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-indigo-500 rounded flex items-center justify-center font-black text-xs">M</div>
                <span class="font-black tracking-tight text-sm">MyUniform</span>
            </div>
            <div class="hidden md:flex items-center gap-2">
                <a href="#" class="nav-link">Battalion</a>
                <a href="#" class="nav-link">Resources</a>
                <a href="#" class="nav-link">Cadet Portal</a>
                <a href="#" class="nav-link">Contact</a>
            </div>
            <div class="w-8 md:hidden"></div>
        </nav>

        <!-- CENTER HERO -->
        <div class="flex flex-col items-center text-center max-w-xl">
            <div class="fade-in-up" style="animation-delay: 0.1s">
                <h1 class="text-6xl font-black tracking-tighter mb-4">
                    Broward <span class="text-indigo-400">JROTC</span>
                </h1>
                <p class="text-indigo-200/50 uppercase tracking-[0.4em] font-bold text-[10px] mb-12">Uniform Builder</p>
            </div>
            
            <div onclick="enterApp()" class="btn-tap fade-in-up group relative p-6 bg-white/5 backdrop-blur-xl rounded-3xl border border-white/10 hover:border-indigo-500/50 hover:bg-white/10 cursor-pointer transition-all w-full max-w-xs text-center" style="animation-delay: 0.2s">
                <h3 class="font-bold text-lg relative">Pompano Beach</h3>
                <p class="text-indigo-400 text-[10px] font-black uppercase tracking-widest mt-1 relative">Enter Battalion</p>
            </div>
        </div>

        <!-- FOOTER / DISCLAIMER -->
        <footer class="w-full max-w-3xl text-center pb-8 opacity-40 fade-in-up" style="animation-delay: 0.4s">
            <div class="h-px bg-white/20 w-16 mx-auto mb-6"></div>
            <p class="text-[10px] uppercase tracking-widest font-bold mb-2">© 2024 MyUniform Pro. All Rights Reserved.</p>
            <p class="text-[9px] leading-relaxed">This tool is for visual representation only. Always refer to official JROTC CCR 145-2 regulations for final ribbon placement and inspection standards. Not affiliated with the Department of the Army.</p>
        </footer>
    </div>

    <!-- MAIN APP CONTENT -->
    <div id="builder-content" class="hidden opacity-0 transition-opacity duration-500 min-h-screen pb-12">
        <header class="p-4 px-6 flex items-center justify-between sticky top-0 bg-white/80 backdrop-blur-xl z-40 border-b border-slate-200">
            <button onclick="exitApp()" class="btn-tap bg-slate-100 hover:bg-slate-200 px-4 py-2 rounded-xl font-bold text-[11px] uppercase tracking-tight transition-all">Exit Builder</button>
            <div class="text-center">
                <h2 class="text-sm font-black leading-tight">Pompano Beach HS</h2>
                <p class="text-indigo-600 font-black text-[9px] uppercase tracking-widest">Tornado Battalion</p>
            </div>
            <button onclick="resetAll()" class="btn-tap px-4 py-2 text-red-500 hover:bg-red-50 rounded-xl font-bold text-[11px] uppercase tracking-wider transition-all text-right">Reset</button>
        </header>

        <div class="max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-2 gap-8 items-start">
            <!-- LEFT: VISUALIZER -->
            <div class="flex flex-col items-center lg:sticky lg:top-24">
                <div class="bg-slate-900 w-full rounded-[3rem] p-6 shadow-2xl flex items-center justify-center overflow-hidden border-[6px] border-slate-800 relative">
                    <div class="mannequin-container" id="mannequin">
                        <img src="https://placehold.co/480x620/0f172a/6366f1?text=Class+A+Uniform" id="mannequin-base" class="mannequin-img" alt="Uniform">
                        <div id="u-ribbons" class="ribbon-rack-container"></div>
                        <div id="u-medals" class="medals-container"></div>
                        <div id="u-arcs" class="arcs-container"></div>
                    </div>
                </div>
            </div>

            <!-- RIGHT: CONTROLS -->
            <div class="bg-white rounded-[2.5rem] p-6 shadow-xl border border-slate-100 h-[700px] flex flex-col">
                <div class="flex p-1.5 bg-slate-100/80 rounded-2xl mb-6">
                    <button id="btn-ribbons" onclick="setTab('ribbons')" class="flex-1 py-2.5 rounded-xl font-bold text-xs bg-white text-indigo-600 shadow-sm transition-all">Ribbons</button>
                    <button id="btn-medals" onclick="setTab('medals')" class="flex-1 py-2.5 rounded-xl font-bold text-xs text-slate-400 transition-all">Medals</button>
                    <button id="btn-arcs" onclick="setTab('arcs')" class="flex-1 py-2.5 rounded-xl font-bold text-xs text-slate-400 transition-all">Arcs</button>
                </div>
                
                <div class="relative mb-4">
                    <input type="text" id="globalSearch" onkeyup="renderSelections()" placeholder="Search awards..." class="w-full p-3 pl-5 rounded-xl border border-slate-200 bg-slate-50 text-xs outline-none focus:ring-4 focus:ring-indigo-500/10 focus:border-indigo-500 transition-all">
                </div>
                
                <div id="selection-list" class="space-y-2 overflow-y-auto pr-2 flex-1 scroll-smooth"></div>
            </div>
        </div>
    </div>

    <script>
        const OFFICIAL_RIBBONS = [
            { id: 'hero', name: 'Medal for Heroism', precedence: 1, img: 'assets/army_jrotc_medal_for_heroism_ribbon.png' },
            { id: 'sup-c', name: 'Superior Cadet Award', precedence: 2, img: 'assets/army_jrotc_superior_cadet_ribbon.png' },
            { id: 'n11', name: 'Distinguished Cadet Award N-1-1', precedence: 3, img: 'assets/army_jrotc_distinguished_cadet_ribbon.png' },
            { id: 'n12', name: 'Academic Excellence Award N-1-2', precedence: 4, img: 'assets/army_jrotc_academic_excellence_ribbon.png' },
            { id: 'n13', name: 'Academic Achievement Award N-1-3', precedence: 5, img: 'assets/army_jrotc_academic_achievement_ribbon.png' },
            { id: 'n14', name: 'Perfect Attendance Award N-1-4', precedence: 6, img: 'assets/army_jrotc_perfect_attendance_ribbon.png' },
            { id: 'n15', name: 'Student Governement Award N-1-5', precedence: 7, img: 'assets/army_jrotc_student_government_ribbon.png' },
            { id: 'n16', name: 'Leadership Education & Training N-1-6', precedence: 8, img: 'assets/army_jrotc_leadership_education_training_service_ribbon.png' },
            { id: 'n17', name: 'Superior Instructor N-1-7', precedence: 9, img: 'assets/army_jrotc_n_1_7_ribbon.png' },
            { id: 'n18', name: 'CPR First Aid N-1-8', precedence: 10, img: 'assets/army_jrotc_n_1_8_ribbon.png' },
            { id: 'n19', name: 'Distinguished Cadet N-1-9', precedence: 11, img: 'assets/army_jrotc_n_1_9_ribbon.png' },
            { id: 'n110', name: 'Honor Cadet N-1-10', precedence: 12, img: 'assets/army_jrotc_n_1_10_ribbon.png' },
            { id: 'n31', name: 'Dai/Sai Instructor Leadership N-3-1', precedence: 13, img: 'assets/army_jrotc_dai_sai_instructor_leadership_ribbon.png' },
            { id: 'n32', name: 'Personal Appearance N-3-2', precedence: 14, img: 'assets/army_jrotc_personal_appearance_ribbon.png' },
            { id: 'n33', name: 'Profiency N-3-3', precedence: 15, img: 'assets/army_jrotc_proficiency_ribbon.png' },
            { id: 'n34', name: 'Drill Team N-3-4', precedence: 16, img: 'assets/army_jrotc_drill_team_ribbon.png' },
            { id: 'n35', name: 'Orienteering N-3-5', precedence: 17, img: 'assets/army_jrotc_orienteering_ribbon.png' },
            { id: 'n36', name: 'Color | Honor Guard N-3-6', precedence: 18, img: 'assets/army_jrotc_color_guard_ribbon.png' },
            { id: 'n37', name: 'Rifle | Marksmanship Team N-3-7', precedence: 19, img: 'assets/army_jrotc_rifle_team_ribbon.png' },
            { id: 'n38', name: 'Adventure Training Team N-3-8', precedence: 20, img: 'assets/army_jrotc_adventure_training_ribbon.png' },
            { id: 'n39', name: 'Commendation N-3-9', precedence: 21, img: 'assets/army_jrotc_commendation_ribbon.png' },
            { id: 'n310', name: 'Good Conduct N-3-10', precedence: 22, img: 'assets/army_jrotc_good_conduct_ribbon.png' },
            { id: 'n311', name: 'JCLC Participation N-3-11', precedence: 23, img: 'assets/army_jrotc_jclc_participation_ribbon.png' },
            { id: 'n312', name: 'Championship Drill Team N-3-12', precedence: 24, img: 'assets/army_jrotc_n_3_12_ribbon.png' },
            { id: 'n313', name: 'Raider Team N-3-13', precedence: 25, img: 'assets/army_jrotc_n_3_13_ribbon.png' },
            { id: 'n314', name: 'Recondo / Rappelling N-3-14', precedence: 26, img: 'assets/army_jrotc_n_3_14_ribbon.png' },
            { id: 'n315', name: 'Meritorious Actions N-3-15', precedence: 27, img: 'assets/army_jrotc_n_3_15_ribbon.png' },
            { id: 'n21', name: 'Varsity Athletics N-2-1', precedence: 28, img: 'assets/army_jrotc_varsity_athletics_ribbon.png' },
            { id: 'n22', name: 'Physical Fitness N-2-2', precedence: 29, img: 'assets/army_jrotc_physical_fitness_ribbon.png' },
            { id: 'n23', name: 'JROTC Athletics N-2-3', precedence: 30, img: 'assets/army_jrotc_athletics_ribbon.png' },
            { id: 'n24', name: 'Junior Varsity Athletics N-2-4', precedence: 31, img: 'assets/army_jrotc_n_2_4_ribbon.png' },
            { id: 'n25', name: 'Athletic Service N-2-5', precedence: 32, img: 'assets/army_jrotc_n_2_5_ribbon.png' },
            { id: 'n41', name: 'Parade N-4-1', precedence: 33, img: 'assets/army_jrotc_parade_ribbon.png' },
            { id: 'n42', name: 'Recruiting N-4-2', precedence: 34, img: 'assets/army_jrotc_recruiting_ribbon.png' },
            { id: 'n43', name: 'School Support N-4-3', precedence: 35, img: 'assets/army_jrotc_n_4_3_ribbon.png' },
            { id: 'n44', name: 'Community Service N-4-4', precedence: 36, img: 'assets/army_jrotc_n_4_4_ribbon.png' },
            { id: 'n45', name: 'Confidence Course N-4-5', precedence: 37, img: 'assets/army_jrotc_n_4_5_ribbon.png' },
            { id: 'n46', name: 'Service Learning N-4-6', precedence: 38, img: 'assets/army_jrotc_service_learning_ribbon.png' },
            { id: 'n47', name: 'Excellent Staff Performance N-4-7', precedence: 39, img: 'assets/army_jrotc_excellent_staff_performance_ribbon.png' }
        ];

        // POMPANO UNOFFICIAL LIST
        const POMPANO_RIBBONS = [
            { id: 'p-ccq', name: 'Company Commander of the Quarter', precedence: 300, color: '#166534' },
            { id: 'p-cxoq', name: 'Company XO of the Quarter', precedence: 301, color: '#1e40af' },
            { id: 'p-c1sq', name: 'Company First Sergeant of the Quarter', precedence: 302, color: '#991b1b' },
            { id: 'p-plq', name: 'Platoon Leader of the Quarter', precedence: 303, color: '#1e3a8a' },
            { id: 'p-psq', name: 'Platoon Sergeant of the Quarter', precedence: 304, color: '#1e293b' },
            { id: 'p-slq', name: 'Squad Leader of the Quarter', precedence: 305, color: '#3f6212' },
            { id: 'p-smq', name: 'Squad Member of the Quarter', precedence: 306, color: '#0f172a' },
            { id: 'p-cplq', name: 'Company Platoon Leader of the Quarter', precedence: 307, color: '#4c1d95' },
            { id: 'p-cpsq', name: 'Company Platoon Sergeant of the Quarter', precedence: 308, color: '#7c2d12' },
            { id: 'p-cslq', name: 'Company Squad Leader of the Quarter', precedence: 309, color: '#064e3b' },
            { id: 'p-csmq', name: 'Company Squad Member of the Quarter', precedence: 310, color: '#451a03' },
            { id: 'p-ma', name: 'Military Appreciation', precedence: 311, img: 'assets/Military_Appreciation_Ribbon.png', color: '#854d0e' },
            { id: 'p-echc', name: 'Experience Camp Honor Cadet', precedence: 312, color: '#b45309' },
            { id: 'p-echo', name: 'Experience Camp Honor Company', precedence: 313, color: '#c2410c' },
            { id: 'p-ecc', name: 'Experience Camp Cadet Cadre', precedence: 314, color: '#be123c' },
            { id: 'p-eca', name: 'Experience Camp Attendance', precedence: 315, color: '#0d9488' },
            { id: 'p-jpa', name: 'JPA Ribbon', precedence: 316, color: '#334155' },
            { id: 'p-dai', name: 'DAI Award Ribbon', precedence: 317, color: '#4d7c0f' },
            { id: 'p-q1c', name: 'Q1 Company of the Quarter', precedence: 318, img: 'assets/Q1_Company_Of_Quarter_Ribbon.png', color: '#1d4ed8' },
            { id: 'p-q2c', name: 'Q2 Company of the Quarter', precedence: 319, color: '#1e3a8a' },
            { id: 'p-q3c', name: 'Q3 Company of the Quarter', precedence: 320, color: '#1e40af' },
            { id: 'p-q4c', name: 'Q4 Company of the Quarter', precedence: 321, color: '#1e3a8a' },
            { id: 'p-hc', name: 'Honor Company', precedence: 322, img: 'assets/Honor_Company_Ribbon.png', color: '#ca8a04' },
            { id: 'p-q1cc', name: 'Q1 Company Cadet of the Quarter', precedence: 323, color: '#0369a1' },
            { id: 'p-q2cc', name: 'Q2 Company Cadet of the Quarter', precedence: 324, color: '#0369a1' },
            { id: 'p-q3cc', name: 'Q3 Company Cadet of the Quarter', precedence: 325, color: '#0369a1' },
            { id: 'p-q4cc', name: 'Q4 Company Cadet of the Quarter', precedence: 326, color: '#0369a1' },
            { id: 'p-fun', name: 'Funeral Ribbon', precedence: 327, img: 'assets/Funeral_Ribbon.png', color: '#020617' },
            { id: 'p-100f', name: '100 Flags Ribbon', precedence: 328, color: '#991b1b' },
            { id: 'p-haf', name: 'Highest Amount of Flags', precedence: 329, color: '#854d0e' },
            { id: 'p-cfr', name: 'Company Flag Requirements', precedence: 330, color: '#166534' }
        ];

        const MEDALS = [
            { id: 'm-hero', name: 'Heroism Medal', color: '#8b0000' },
            { id: 'm-sup', name: 'Superior Cadet Medal', color: '#1e3a8a' },
            { id: 'm-acad', name: 'Academic Achievement', color: '#fbbf24' }
        ];

        const ARCS = [
            { id: 'a-drill', name: 'Drill Team' },
            { id: 'a-color', name: 'Color Guard' },
            { id: 'a-raider', name: 'Raider' },
            { id: 'a-rifle', name: 'Rifle Team' }
        ];

        let state = { ribbons: new Map(), medals: new Set(), arcs: new Set(), tab: 'ribbons' };

        // CORE FUNCTIONS
        function enterApp() {
            const lp = document.getElementById('landing-page');
            const bc = document.getElementById('builder-content');
            lp.style.opacity = '0';
            setTimeout(() => {
                lp.classList.add('hidden');
                bc.classList.remove('hidden');
                setTimeout(() => bc.classList.add('opacity-100'), 50);
                renderSelections();
                updatePreview();
            }, 500);
        }

        function exitApp() { 
            document.getElementById('builder-content').classList.remove('opacity-100');
            setTimeout(() => location.reload(), 500);
        }

        function setTab(tab) {
            state.tab = tab;
            ['ribbons', 'medals', 'arcs'].forEach(t => {
                const btn = document.getElementById(`btn-${t}`);
                btn.className = (t === tab) 
                    ? "flex-1 py-2.5 rounded-xl font-bold text-xs bg-white text-indigo-600 shadow-sm"
                    : "flex-1 py-2.5 rounded-xl font-bold text-xs text-slate-400";
            });
            renderSelections();
        }

        function updateRibbon(id, d) {
            let count = (state.ribbons.get(id) || 0) + d;
            if (count <= 0) state.ribbons.delete(id); 
            else state.ribbons.set(id, Math.min(count, 5));
            updatePreview(); renderSelections();
        }

        function toggleItem(type, id) {
            state[type].has(id) ? state[type].delete(id) : state[type].add(id);
            updatePreview(); renderSelections();
        }

        function renderSelections() {
            const list = document.getElementById('selection-list');
            const search = document.getElementById('globalSearch').value.toLowerCase();
            list.innerHTML = '';
            
            if (state.tab === 'ribbons') {
                const renderCategory = (title, items) => {
                    const filtered = items.filter(r => r.name.toLowerCase().includes(search));
                    if (filtered.length === 0) return;
                    
                    const catHeader = document.createElement('div');
                    catHeader.className = "text-[9px] font-black uppercase tracking-widest text-slate-400 mb-2 mt-4 px-2";
                    catHeader.innerText = title;
                    list.appendChild(catHeader);

                    filtered.forEach(r => {
                        const count = state.ribbons.get(r.id) || 0;
                        const div = document.createElement('div');
                        div.className = `flex items-center justify-between p-3 rounded-xl border transition-all ${count > 0 ? 'border-indigo-500 bg-indigo-50' : 'bg-white border-slate-100'}`;
                        
                        // Placeholder logic for UI list
                        let ribbonDisplay = '';
                        if (r.img) {
                            ribbonDisplay = `<img src="${r.img}" class="w-full h-full object-fill" onerror="this.parentNode.classList.add('placeholder-ribbon'); this.style.opacity='0'">`;
                        } else {
                            ribbonDisplay = `<div class="w-full h-full placeholder-ribbon" style="--ribbon-color: ${r.color}"></div>`;
                        }

                        div.innerHTML = `
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-3 border border-slate-200 bg-white overflow-hidden">
                                    ${ribbonDisplay}
                                </div>
                                <span class="text-[10px] font-bold text-slate-700 leading-tight">${r.name}</span>
                            </div>
                            <div class="flex items-center bg-white rounded-lg border border-slate-200 p-0.5 ml-2 shrink-0">
                                <button onclick="updateRibbon('${r.id}', -1)" class="w-6 h-6 text-xs font-bold text-slate-400">-</button>
                                <span class="w-4 text-center text-[10px] font-black text-indigo-600">${count}</span>
                                <button onclick="updateRibbon('${r.id}', 1)" class="w-6 h-6 text-xs text-indigo-600 font-bold">+</button>
                            </div>`;
                        list.appendChild(div);
                    });
                };

                renderCategory("Pompano Unofficial", POMPANO_RIBBONS);
                renderCategory("Official JROTC", OFFICIAL_RIBBONS);

            } else if (state.tab === 'medals') {
                MEDALS.filter(m => m.name.toLowerCase().includes(search)).forEach(m => {
                    const active = state.medals.has(m.id);
                    const div = document.createElement('div');
                    div.className = `flex items-center justify-between p-3 rounded-xl border cursor-pointer ${active ? 'border-indigo-500 bg-indigo-50' : 'bg-white'}`;
                    div.onclick = () => toggleItem('medals', m.id);
                    div.innerHTML = `<span class="text-[10px] font-bold">${m.name}</span><span class="text-indigo-600 font-black">${active ? '✓' : '+'}</span>`;
                    list.appendChild(div);
                });
            } else {
                ARCS.filter(a => a.name.toLowerCase().includes(search)).forEach(a => {
                    const active = state.arcs.has(a.id);
                    const div = document.createElement('div');
                    div.className = `flex items-center justify-between p-3 rounded-xl border cursor-pointer ${active ? 'border-indigo-500 bg-indigo-50' : 'bg-white'}`;
                    div.onclick = () => toggleItem('arcs', a.id);
                    div.innerHTML = `<span class="text-[10px] font-bold">${a.name} Arc</span><span class="text-indigo-600 font-black">${active ? '✓' : '+'}</span>`;
                    list.appendChild(div);
                });
            }
        }

        function updatePreview() {
            const rContainer = document.getElementById('u-ribbons');
            rContainer.innerHTML = '';
            const allPossible = [...OFFICIAL_RIBBONS, ...POMPANO_RIBBONS];
            const activeR = allPossible
                .filter(r => state.ribbons.has(r.id))
                .sort((a,b) => a.precedence - b.precedence);

            for(let i=0; i < activeR.length; i += 3) {
                const row = document.createElement('div');
                row.className = "flex gap-[1.5px]";
                activeR.slice(i, i+3).forEach(r => {
                    const d = document.createElement('div');
                    d.className = 'ribbon-mini';
                    
                    if (r.img) {
                        d.style.backgroundImage = `url(${r.img})`;
                    } else {
                        d.classList.add('placeholder-ribbon');
                        d.style.setProperty('--ribbon-color', r.color);
                    }

                    const c = state.ribbons.get(r.id);
                    if(c > 1) {
                        const s = document.createElement('div');
                        s.className = 'mini-star';
                        s.innerText = '★'.repeat(c-1);
                        d.appendChild(s);
                    }
                    row.appendChild(d);
                });
                rContainer.appendChild(row);
            }

            // Simple medal/arc renders
            const mContainer = document.getElementById('u-medals');
            mContainer.innerHTML = '';
            MEDALS.filter(m => state.medals.has(m.id)).forEach(m => {
                const d = document.createElement('div');
                d.innerHTML = `<div style="width:18px; height:28px;"><div style="height:12px;background:${m.color}"></div><div style="width:16px;height:16px;background:gold;border-radius:50%;margin:-2px auto 0"></div></div>`;
                mContainer.appendChild(d);
            });

            const aContainer = document.getElementById('u-arcs');
            aContainer.innerHTML = '';
            ARCS.filter(a => state.arcs.has(a.id)).forEach(a => {
                const d = document.createElement('div');
                d.style = "padding:1px 5px; font-size:6px; background:#232d4b; color:gold; border:0.5px solid gold; border-radius:3px; margin-bottom:1px;";
                d.innerText = a.name;
                aContainer.appendChild(d);
            });
        }

        function resetAll() {
            state.ribbons.clear();
            state.medals.clear();
            state.arcs.clear();
            updatePreview();
            renderSelections();
        }
    </script>
</body>
</html>
